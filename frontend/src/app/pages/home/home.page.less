/* Hero */
.hero {
  position: relative;
  min-height: 60vh;
  display: grid;
  place-items: center;
  overflow: hidden;
  /* Full-bleed hero while page content remains in container */
  width: 100vw;
  max-width: 100vw;
  left: 50%;
  right: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
  border-radius: 0;
  transition: min-height .3s ease, height .3s ease, opacity .25s ease;
}
.hero.hero-collapsed { min-height: 0 !important; height: 0 !important; opacity: 0; pointer-events: none; }

/* Ensure collapsing hero does not create sudden layout jumps on very small screens */
@media (max-width: 360px) {
  .hero { min-height: 50vh; }
}
.hero-media {
  position: absolute; inset: 0;
  background-image: url('https://images.unsplash.com/photo-1630165356623-266076eaceb6?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=2070');
  background-size: cover; background-position: center; background-repeat: no-repeat;
  filter: saturate(0.9) contrast(0.95);
  z-index: -2;
}
.hero-overlay {
  position: absolute; inset: 0; pointer-events: none;
  /* Stripe overlay: 1px dark line, 1px transparent line */
  background:
    repeating-linear-gradient(
      180deg,
      rgba(0,0,0,0.18) 0px,
      rgba(0,0,0,0.18) 3px,
      rgba(0,0,0,0.0) 3px,
      rgba(0,0,0,0.0) 4px
    ),
    linear-gradient(180deg, rgba(0,0,0,0.20) 0%, rgba(0,0,0,0.12) 60%, rgba(0,0,0,0.00) 100%);
  z-index: 0;
}
.hero-gradient {
  position: absolute; inset: auto 0 0 0; height: 220px;
  background: linear-gradient( to top, var(--bg) 0%, transparent 100%);
  pointer-events: none;
  z-index: 1;
}
.hero-content {
  position: relative;
  text-align: center;
  padding: 0 1rem 3rem; /* no top padding */
  z-index: 2;
  max-width: 1100px;
  width: 100%;
  margin: 0 auto;
}
.hero h1 { margin: 0 0 .5rem 0; font-size: clamp(1.6rem, 3vw, 2.4rem); }
.hero .sub { color: #ffffff; opacity: .96; margin-bottom: 1rem; font-size: clamp(1rem, 1.8vw, 1.25rem); font-weight: 500; }
.hero-actions { display: inline-flex; gap: .75rem; flex-wrap: wrap; justify-content: center; }

/* Dark mode legibility for hero */
.theme-dark .hero-overlay {
  /* Dark mode: stronger stripes + stronger vertical dark gradient */
  background:
    repeating-linear-gradient(
      180deg,
      rgba(0,0,0,0.45) 0px,
      rgba(0,0,0,0.45) 3px,
      rgba(0,0,0,0.0) 3px,
      rgba(0,0,0,0.0) 4px
    ),
    linear-gradient(180deg, rgba(0,0,0,0.70) 0%, rgba(0,0,0,0.45) 45%, rgba(0,0,0,0.00) 100%);
}
.hero .hero-content, .hero .hero-content * {}

/* Base: white text with strong shadow for readability on photo */
.hero .hero-content, .hero .hero-content h1, .hero .hero-content .sub { color: #ffffff; }
.hero .hero-content h1, .hero .hero-content .sub {
  text-shadow: 0 3px 18px rgba(0,0,0,.6), 0 0 2px rgba(0,0,0,.45);
}

/* Dark mode: text same as page background (navy) with strong stroke to read on dark photo */
/* Dark: keep white with heavier shadow */
.theme-dark .hero-content { color: #ffffff; }
.theme-dark .hero-content h1,
.theme-dark .hero-content .sub {
  text-shadow: 0 4px 22px rgba(0,0,0,.75), 0 0 2px rgba(0,0,0,.6);
}
/* Buttons in hero use warm accent across modes; ensure legibility on photo */
.hero .mat-mdc-outlined-button.mat-primary {
  border-color: var(--accent) !important;
  color: var(--accent) !important;
  background: rgba(0,0,0,.04);
}
.theme-dark .hero .mat-mdc-outlined-button.mat-primary { background: rgba(255,255,255,.06); }
.hero .mat-mdc-outlined-button.mat-primary:hover { filter: brightness(1.08); }
.hero .mat-mdc-unelevated-button.mat-primary { box-shadow: 0 4px 14px rgba(0,0,0,.35); }
.theme-dark .hero .mat-mdc-unelevated-button.mat-primary { box-shadow: 0 4px 14px rgba(0,0,0,.45); }

/* Weekly deal */
.weekly { padding: 3rem 0 1.5rem; }
.section-head { margin: 0 0 1rem 0; }
.section-head h2 { margin: .25rem 0; font-size: 1.6rem; }
.muted { color: var(--muted); }
.pill.hot { background: #fff1e6; color: #b45309; padding: .25rem .6rem; border-radius: 999px; display: inline-block; font-weight: 600; }

.weekly-card { display: grid; grid-template-columns: 1.2fr 1fr; gap: 1rem; align-items: center; background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: .75rem; }
.w-thumb { position: relative; width: 100%; aspect-ratio: 16/9; background:#1118270f; border-radius: 10px; overflow: hidden; display:flex; align-items:center; justify-content:center; }
.w-thumb img { width: 100%; height: 100%; object-fit: cover; display:block; }
.w-meta h3 { margin: 0 0 .25rem 0; font-size: 1.2rem; }
.w-meta .price { font-weight: 700; margin-top: .25rem; }
.badge { position: absolute; left: 8px; top: 8px; background: #f59e0b; color:#fff; padding: .25rem .5rem; border-radius: 999px; font-size: .8rem; }

/* Search + list */
.search-list { padding: 2rem 0; }
.filters { border: 1px solid var(--border); background: var(--surface); border-radius: 12px; padding: .75rem; margin-bottom: 1rem; }
.filters .row { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: .75rem; align-items: end; grid-auto-rows: minmax(0, auto); grid-auto-flow: row dense; }
.filters .row.two-lines { grid-auto-rows: minmax(0, auto); grid-auto-flow: row dense; }
.filters .row.two-lines > label:nth-child(n+5) { grid-row: auto; }
.filters .row > * { min-width: 0; }
.filters label { display: grid; gap: .25rem; font-size: .9rem; min-width: 0; }
.filters label > span { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.filters input, .filters select, .filters textarea { width: 100%; box-sizing: border-box; padding: .5rem .6rem; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); }
.filters .actions { display: flex; gap: .5rem; flex-wrap: wrap; grid-column: 1 / -1; }

.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 1rem; }
.car-card { display: grid; grid-template-rows: auto 1fr auto; }
.thumb { position: relative; width: 100%; aspect-ratio: 16/9; background: #1118270f; display: flex; align-items: center; justify-content: center; border-radius: 8px; overflow: hidden; }
.thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
.price { color: var(--text); font-weight: 600; }
.see-all { margin-top: 1rem; text-align: center; }
/* Ensure content area stretches so actions align at bottom */
.car-card mat-card-content { display: grid; gap: .25rem; padding-top: .5rem; }
.car-card mat-card-actions { margin-top: .25rem; }

/* About */
.about { padding: 2rem 0; }
.about-grid { display: grid; grid-template-columns: 1.1fr .9fr; gap: 1rem; }
.badges { display: flex; gap: .5rem; margin-top: .5rem; flex-wrap: wrap; }
.about .badges .badge {
  background: var(--chip-bg);
  color: var(--chip-fg);
  border: 1px solid var(--chip-border);
  font-weight: 600;
}
.testimonials blockquote { margin: 0 0 .75rem 0; padding: .75rem; border-left: 3px solid #93c5fd; background: #f8fafc10; border-radius: 6px; }

/* Contact */
.contact { padding: 2rem 0; }
.contact-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
.contact-form { display: grid; grid-template-columns: repeat(2, 1fr); gap: .75rem; background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: .75rem; }
.contact-form .full { grid-column: 1 / -1; }
.contact-form label { display: grid; gap: .25rem; font-size: .9rem; }
.contact-form input, .contact-form textarea { padding: .5rem .6rem; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); }
.contact-form .actions { grid-column: 1 / -1; }
.contact-form .hours { grid-column: 1 / -1; color: var(--muted); }
.contact-form .quick { grid-column: 1 / -1; display: flex; gap: .5rem; flex-wrap: wrap; }
.map-wrap { border: 1px solid var(--border); border-radius: 12px; overflow: hidden; background: #1118270f; display: grid; }
.map-frame { width: 100%; min-height: 320px; border: 0; display: block; }
.map-fallback { padding: .5rem .75rem; background: transparent; }
.map-fallback a { color: var(--primary); font-weight: 600; }

/* Alternating full-width backgrounds for sections after hero */
.home-alt > section { position: relative; padding: 2.5rem 0; background: var(--section-bg); }
.home-alt > section::before {
  content: "";
  position: absolute; inset: 0; z-index: -1;
  /* Full-bleed background using huge box-shadow + clip */
  box-shadow: 0 0 0 100vmax var(--section-bg, transparent);
  clip-path: inset(0 -100vmax);
}
.home-alt > section:nth-child(odd) { --section-bg: var(--section-bg-odd); }
.home-alt > section:nth-child(even) { --section-bg: var(--section-bg-even); }

/* Responsive tweaks */
@media (max-width: 1000px) {
  .weekly-card { grid-template-columns: 1fr; }
  .about-grid { grid-template-columns: 1fr; }
  .filters .row { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }
  .filters .row.two-lines { grid-template-columns: inherit; }
  .filters .row.two-lines > label:nth-child(n+5) { grid-row: auto; }
  .contact-grid { grid-template-columns: 1fr; }
  .contact-form { grid-template-columns: 1fr; }
}

@media (max-width: 600px) {
  .filters .row { grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); }
  .filters .row.two-lines { grid-template-columns: inherit; }
}

/* Extra small devices (e.g., iPhone 4 width 320px) */
@media (max-width: 360px) {
  .section-head h2 { font-size: 1.3rem; }
  .weekly-card { grid-template-columns: 1fr; }
  .filters { padding: .5rem; }
  .filters input, .filters select, .filters textarea { font-size: .95rem; }
  .contact-form { padding: .5rem; }
  .map-frame { min-height: 260px; }
}
